(function(){'use strict';

angular.module('orgReposApp').controller('OrgsCtrl', ["$scope", function ($scope) {
    $scope.page = 1;
    $scope.perPage = 20;
    $scope.sort = { name_sort: 1 };
    $scope.orderProperty = '1';
    $scope.defaultSortOrder = "Name: A-Z";

    $scope.helpers({
        organizations: function organizations() {
            return Orgs.find({}, {
                sort: $scope.getReactively('sort')
            });
        },
        orgsCount: function orgsCount() {
            return Counts.get('numberOfOrgs');
        }
    });

    $scope.subscribe('orgs', function () {
        return [{
            sort: $scope.getReactively('sort'),
            limit: parseInt($scope.getReactively('perPage')),
            skip: (parseInt($scope.getReactively('page')) - 1) * parseInt($scope.getReactively('perPage'))
        }, $scope.getReactively('search')];
    });

    /*
     * Sort the data by Name
     */
    $scope.sortByName = function (sortOrder) {
        if (sortOrder) {
            $scope.sort = { name_sort: parseInt(sortOrder) };
        }
    };

    /*
     * Sort the data by Name
     */
    $scope.sortByRepo = function (sortOrder) {
        if (sortOrder) {
            $scope.sort = { public_repos: parseInt(sortOrder) };
        }
    };

    /*
     * Sort the data by Name
     */
    $scope.sortByDate = function (sortOrder) {
        if (sortOrder) {
            $scope.sort = { created_at: parseInt(sortOrder) };
        }
    };
}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9jbGllbnQvY29tcG9uZW50cy9vcmdzL29yZ3MuY29udHJvbGxlci5uZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUE7O0FBRVosT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FDNUIsVUFBVSxDQUFDLFVBQVUsRUFBRSxVQUFTLE1BQU0sRUFBRTtBQUNyQyxVQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNoQixVQUFNLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNwQixVQUFNLENBQUMsSUFBSSxHQUFHLEVBQUMsU0FBUyxFQUFHLENBQUMsRUFBQyxDQUFDO0FBQzlCLFVBQU0sQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDO0FBQzNCLFVBQU0sQ0FBQyxnQkFBZ0IsR0FBRyxXQUFXLENBQUM7O0FBRXRDLFVBQU0sQ0FBQyxPQUFPLENBQUM7QUFDWCxxQkFBYSxFQUFFLHlCQUFXO0FBQ3RCLG1CQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFO0FBQ2pCLG9CQUFJLEVBQUUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7YUFDckMsQ0FBQyxDQUFDO1NBQ047QUFDRCxpQkFBUyxFQUFFLHFCQUFXO0FBQ2xCLG1CQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDckM7S0FDSixDQUFDLENBQUM7O0FBRUgsVUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsWUFBVztBQUNoQyxlQUFPLENBQUM7QUFDSixnQkFBSSxFQUFFLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0FBQ2xDLGlCQUFLLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDaEQsZ0JBQUksRUFBRSxDQUFDLEFBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBSSxDQUFDLENBQUEsR0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxBQUFDO1NBQ3JHLEVBQUUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0tBQ3RDLENBQUMsQ0FBQzs7Ozs7QUFLSCxVQUFNLENBQUMsVUFBVSxHQUFHLFVBQVMsU0FBUyxFQUFFO0FBQ3BDLFlBQUcsU0FBUyxFQUFFO0FBQ1Ysa0JBQU0sQ0FBQyxJQUFJLEdBQUcsRUFBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFDLENBQUM7U0FDbEQ7S0FDSixDQUFDOzs7OztBQUtGLFVBQU0sQ0FBQyxVQUFVLEdBQUcsVUFBUyxTQUFTLEVBQUU7QUFDcEMsWUFBRyxTQUFTLEVBQUU7QUFDVixrQkFBTSxDQUFDLElBQUksR0FBRyxFQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUMsQ0FBQztTQUNyRDtLQUNKLENBQUM7Ozs7O0FBS0YsVUFBTSxDQUFDLFVBQVUsR0FBRyxVQUFTLFNBQVMsRUFBRTtBQUNwQyxZQUFHLFNBQVMsRUFBRTtBQUNWLGtCQUFNLENBQUMsSUFBSSxHQUFHLEVBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBQyxDQUFDO1NBQ25EO0tBQ0osQ0FBQztDQUVMLENBQUMsQ0FBQyIsImZpbGUiOiIvY2xpZW50L2NvbXBvbmVudHMvb3Jncy9vcmdzLmNvbnRyb2xsZXIubmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdvcmdSZXBvc0FwcCcpXHJcbi5jb250cm9sbGVyKCdPcmdzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgJHNjb3BlLnBhZ2UgPSAxO1xyXG4gICAgJHNjb3BlLnBlclBhZ2UgPSAyMDtcclxuICAgICRzY29wZS5zb3J0ID0ge25hbWVfc29ydCA6IDF9O1xyXG4gICAgJHNjb3BlLm9yZGVyUHJvcGVydHkgPSAnMSc7XHJcbiAgICAkc2NvcGUuZGVmYXVsdFNvcnRPcmRlciA9IFwiTmFtZTogQS1aXCI7XHJcbiAgICBcclxuICAgICRzY29wZS5oZWxwZXJzKHtcclxuICAgICAgICBvcmdhbml6YXRpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9yZ3MuZmluZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgc29ydDogJHNjb3BlLmdldFJlYWN0aXZlbHkoJ3NvcnQnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9yZ3NDb3VudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb3VudHMuZ2V0KCdudW1iZXJPZk9yZ3MnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuc3Vic2NyaWJlKCdvcmdzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFt7XHJcbiAgICAgICAgICAgIHNvcnQ6ICRzY29wZS5nZXRSZWFjdGl2ZWx5KCdzb3J0JyksXHJcbiAgICAgICAgICAgIGxpbWl0OiBwYXJzZUludCgkc2NvcGUuZ2V0UmVhY3RpdmVseSgncGVyUGFnZScpKSxcclxuICAgICAgICAgICAgc2tpcDogKChwYXJzZUludCgkc2NvcGUuZ2V0UmVhY3RpdmVseSgncGFnZScpKSkgLSAxKSAqIChwYXJzZUludCgkc2NvcGUuZ2V0UmVhY3RpdmVseSgncGVyUGFnZScpKSlcclxuICAgICAgICB9LCAkc2NvcGUuZ2V0UmVhY3RpdmVseSgnc2VhcmNoJyldO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypcclxuICAgICAqIFNvcnQgdGhlIGRhdGEgYnkgTmFtZVxyXG4gICAgICovXHJcbiAgICAkc2NvcGUuc29ydEJ5TmFtZSA9IGZ1bmN0aW9uKHNvcnRPcmRlcikge1xyXG4gICAgICAgIGlmKHNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUuc29ydCA9IHtuYW1lX3NvcnQ6IHBhcnNlSW50KHNvcnRPcmRlcil9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLypcclxuICAgICAqIFNvcnQgdGhlIGRhdGEgYnkgTmFtZVxyXG4gICAgICovXHJcbiAgICAkc2NvcGUuc29ydEJ5UmVwbyA9IGZ1bmN0aW9uKHNvcnRPcmRlcikge1xyXG4gICAgICAgIGlmKHNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUuc29ydCA9IHtwdWJsaWNfcmVwb3M6IHBhcnNlSW50KHNvcnRPcmRlcil9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLypcclxuICAgICAqIFNvcnQgdGhlIGRhdGEgYnkgTmFtZVxyXG4gICAgICovXHJcbiAgICAkc2NvcGUuc29ydEJ5RGF0ZSA9IGZ1bmN0aW9uKHNvcnRPcmRlcikge1xyXG4gICAgICAgIGlmKHNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUuc29ydCA9IHtjcmVhdGVkX2F0OiBwYXJzZUludChzb3J0T3JkZXIpfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSk7XHJcblxyXG5cclxuIl19
}).call(this);
